---
title: 画面への表示
layout: post
date: 2016-10-31 23:00:00
postTitle: 惑星軌道
categories: display
---

-------

### 1. Julian Ephemeris Date

<div id="JED"></div>


<script src="//code.jquery.com/jquery-1.11.3.js"></script>
<script src="{{site.url}}/js/three.js"></script>
<script src="{{site.url}}/js/celestial-calc.js"></script>
<script src="https://dl.dropboxusercontent.com/u/3587259/Code/Threejs/OrbitControls.js"></script>
<script src="http://d3js.org/d3.v3.js"></script>
<script src="{{site.url}}/js/d3draws.js"></script>
<script type="text/javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_SVG"></script>
<script src="https://cdn.rawgit.com/google/code-prettify/master/loader/run_prettify.js?skin=sons-of-obsidian"></script>
<script type="text/javascript">
var $window = $(window)
  // make code pretty
  $('pre').addClass('prettyprint');
  $('pre').css({"background":"#111",
                 "font-size":"1.05em",
                    "border":"0px"}
                );
  $('code').css({"font-size":"1.05em","color":"#f00"});
  $('canvas').css({"background":"#fff"});

var height = 600,
    width  = 700;
var pi2 = Math.PI * 2;
var pi = Math.PI;
var aDegree = Math.PI / 180;
var decStep = Math.PI / 18;

  planetsElements = [
    {"name":"Mwecury",
      "a":0.38709927,
      "a_cy":0.00000037,
      "e":0.20563593,
      "e_cy":0.00001906,
      "I":7.00497902,
      "I_cy":-0.00594749,
      "L":252.25032350,
      "L_cy":149472.67411175,
      "omega":77.45779628,
      "omega_cy":0.16047689,
      "Omega":48.33076593,
      "Omega_cy":-0.12534081},
    {"name":"Venus",
      "a":0.72333566,
      "a_cy":0.00000390,
      "e":0.00677672,
      "e_cy":-0.00004107,
      "I":3.39467605,
      "I_cy":-0.00078890,
      "L":181.97909950,
      "L_cy":58517.81538729,
      "omega":0.16047689,
      "omega_cy":0.00268329,
      "Omega":76.67984255,
      "Omega_cy":-0.27769418},
    {"name":"Earth",
      "a":1.00000261,
      "a_cy":0.00000562,
      "e":0.01671123,
      "e_cy":-0.00004392,
      "I":-0.00078890,
      "I_cy":-0.00001531,
      "L":100.46457166,
      "L_cy":35999.37244981,
      "omega":102.93768193,
      "omega_cy":0.32327364,
      "Omega":0.0,
      "Omega_cy":0.0},
   /*
    {"name":"Mars",
      "a":,"a_cy":,
     "e":,"e_cy":,
     "I":,"I_cy":,
     "L":,"L_cy":,
     "omega":,"omega_cy":,
     "Omega":,"Omega_cy":},
    {"name":"Jupiter",
      "a":,"a_cy":,
     "e":,"e_cy":,
     "I":,"I_cy":,
     "L":,"L_cy":,
     "omega":,"omega_cy":,
     "Omega":,"Omega_cy":},
    {"name":"Saturn",
      "a":,"a_cy":,
     "e":,"e_cy":,
     "I":,"I_cy":,
     "L":,"L_cy":,
     "omega":,"omega_cy":,
     "Omega":,"Omega_cy":},
    {"name":"Uranus",
      "a":,"a_cy":,
     "e":,"e_cy":,
     "I":,"I_cy":,
     "L":,"L_cy":,
     "omega":,"omega_cy":,
     "Omega":,"Omega_cy":},
    {"name":"Neptune",
      "a":,"a_cy":,
     "e":,"e_cy":,
     "I":,"I_cy":,
     "L":,"L_cy":,
     "omega":,"omega_cy":,
     "Omega":,"Omega_cy":},
    {"name":"Pluto",
      "a":,"a_cy":,
     "e":,"e_cy":,
     "I":,"I_cy":,
     "L":,"L_cy":,
     "omega":,"omega_cy":,
     "Omega":,"Omega_cy":},
 */
  ];

  // 0 
  //  JED
  var date_ = new Date(2016,9,30,12,0,0);
  var result = getJED(date_, 9);
  var T = result.T;
  $("#JED").html("JED= " + result.JED + " T= " + T);

  // 1 
  // 6要素の計算
  function PData(name, x, y, z){
    this.name = name;
    this.x = x;
    this.y = y;
    this.z = z;
  };

  var aRadian = 180 / pi;

  var planetsData = [];
  for (var i = 0; i < planetsElements.length; i++) {
    var name = planetsElements[i].name;
    var a = planetsElements[i].a + planetsElements[i].a_cy * T;
    var e = planetsElements[i].e + planetsElements[i].e_cy * T;
    var I = planetsElements[i].I + planetsElements[i].I_cy * T;
    var L = planetsElements[i].L + planetsElements[i].L_cy * T;
    var omega = planetsElements[i].omega + planetsElements[i].omega_cy * T;
    var Omega = planetsElements[i].Omega + planetsElements[i].Omega_cy * T;
  
    /// degrees -> radians
    I *= aDegree;
    L *= aDegree;
    omega *= aDegree;
    Omega *= aDegree;

    // 2 
    // 近日点引数 ω　( the argument of perihelion) と　
    // 平均近点角 M (mean annomaly) 
    var omega_p = omega - Omega;
    var M = L - omega;
    
    // 3 
    // ケプラー方程式の解
    var E0 = M + e * Math.sin(M);

    var E = getE(E0, M, e);

    var x1 = a * ( Math.cos(E) - e );
    var y1 = a * Math.sqrt(1 - e*e )* Math.sin(E); 
    var z1 = 0;
    var x_ecl = ( Math.cos(omega_p)*Math.cos(Omega)
                - Math.sin(omega_p)*Math.sin(Omega)*Math.cos(I)) * x1
              +
                ( -Math.sin(omega_p)*Math.cos(Omega)
                - Math.cos(omega_p)*Math.sin(Omega)*Math.cos(I)) * y1;
    
    var y_ecl = ( Math.cos(omega_p)*Math.sin(Omega)
                + Math.sin(omega_p)*Math.cos(Omega)*Math.cos(I)) * x1
              +
                ( -Math.sin(omega_p)*Math.sin(Omega)
                + Math.cos(omega_p)*Math.cos(Omega)*Math.cos(I)) * y1    ;
    
    var z_ecl = Math.sin(omega_p)*Math.cos(I) * x1
              + Math.cos(omega_p)*Math.sin(I) * y1; 

    planetsData.push(new PData(name,x_ecl,y_ecl,z_ecl));
    console.log(planetsData[i]);
  };



 




</script>